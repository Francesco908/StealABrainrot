-- VERSIONE ANTI-CRASH CON APERTURA MULTIPLA
local success, Rayfield = pcall(function()
    return loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()
end)

if not success then
    warn("Errore caricamento Rayfield, provo versione alternativa...")
    success, Rayfield = pcall(function()
        return loadstring(game:HttpGet('https://raw.githubusercontent.com/jensonhirst/Rayfield/main/source'))()
    end)
end

if not success then
    error("Impossibile caricare Rayfield")
end

local BrainrotRubati = 0

-- Forza creazione finestra con tentativi multipli
local Window
for i = 1, 3 do
    local success, result = pcall(function()
        return Rayfield:CreateWindow({
            Name = "ðŸ§  BRAINROT HEIST",
            LoadingTitle = "Caricamento...",
            LoadingSubtitle = "Tentativo " .. i,
            ConfigurationSaving = {Enabled = false},
            KeySystem = false
        })
    end)
    
    if success then
        Window = result
        break
    else
        warn("Tentativo " .. i .. " fallito, riprovo...")
        wait(1)
    end
end

if not Window then
    error("Impossibile creare finestra")
end

-- Forza creazione tab con tentativi multipli
local Tab
for i = 1, 3 do
    local success, result = pcall(function()
        return Window:CreateTab("Main")
    end)
    
    if success then
        Tab = result
        break
    else
        warn("Tentativo tab " .. i .. " fallito, riprovo...")
        wait(0.5)
    end
end

if not Tab then
    error("Impossibile creare tab")
end

-- Crea elementi con protezione errori
local Label = Tab:CreateLabel("Brainrot Rubati: 0")

-- Funzione steal protetta
local function StealBrainrot()
    pcall(function()
        BrainrotRubati = BrainrotRubati + 1
        Label:Set("Brainrot Rubati: " .. BrainrotRubati)
    end)
end

-- Pulsante istantaneo - UN CLICK SOLO
Tab:CreateButton({
    Name = "ðŸ”“ RUBA ISTANTANEO (1 CLICK)",
    Callback = function()
        StealBrainrot()
    end,
})

-- Auto steal - UN CLICK SOLO
local AutoSteal = false
Tab:CreateToggle({
    Name = "ðŸ”¥ Auto Steal (1 CLICK)",
    CurrentValue = false,
    Callback = function(Value)
        AutoSteal = Value
        if AutoSteal then
            spawn(function()
                while AutoSteal do
                    wait(0.1)
                    StealBrainrot()
                end
            end)
        end
    end,
})

-- Mega steal - UN CLICK SOLO
Tab:CreateButton({
    Name = "ðŸ’¥ MEGA STEAL (+100) - 1 CLICK",
    Callback = function()
        pcall(function()
            BrainrotRubati = BrainrotRubati + 100
            Label:Set("Brainrot Rubati: " .. BrainrotRubati)
        end)
    end,
})

-- Reset - UN CLICK SOLO
Tab:CreateButton({
    Name = "ðŸ”„ RESET (1 CLICK)",
    Callback = function()
        pcall(function()
            BrainrotRubati = 0
            Label:Set("Brainrot Rubati: 0")
        end)
    end,
})

-- Forza apertura con tentativi multipli
for i = 1, 3 do
    spawn(function()
        wait(i * 0.5)
        pcall(function()
            if Window and Window.Show then
                Window:Show()
            end
        end)
    end)
end

-- Notifica successo
spawn(function()
    wait(2)
    pcall(function()
        if Rayfield and Rayfield.Notify then
            Rayfield:Notify({
                Title = "GUI Caricata!",
                Content = "Brainrot Heist pronto",
                Duration = 3
            })
        end
    end)
end)

print("ðŸ§  BRAINROT HEIST CARICATO CON SUCCESSO!")
