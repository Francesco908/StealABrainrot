-- main.lua
-- Entry point for setting up a Fluent UI for Roblox

-- Load Fluent library
local Fluent = loadstring(game:HttpGet("https://github.com/dawid-scripts/Fluent/releases/latest/download/main.lua"))()

-- Create the main window
local Window = Fluent:CreateWindow({
    Title = "Test UI",
    SubTitle = "by SKIBIDI",
    TabWidth = 160,
    Size = UDim2.fromOffset(400, 300),
    Acrylic = true,
    Theme = "Dark",
    MinimizeKey = Enum.KeyCode.LeftControl,
})

-- Add tabs
local Tabs = {
    Settings = Window:AddTab({ Title = "Settings", Icon = "settings" }),
    Main     = Window:AddTab({ Title = "Main",     Icon = "play"     }),
}

-- SETTINGS TAB
-- Section for example toggle
local SettingsSection = Tabs.Settings:AddSection("Example Features")

local exampleToggle = SettingsSection:AddToggle("ExampleToggle", {
    Title = "Example Toggle",
    Description = "Enable or disable the example feature",
    Default = false,
    Callback = function(state)
        print("Example Toggle state:", state)
    end,
})

-- MAIN TAB
-- Section for actions
local MainSection = Tabs.Main:AddSection("Actions")

MainSection:AddButton({
    Title = "Test Button",
    Description = "Press to run test action",
    Callback = function()
        print("Test Button pressed!")
        -- toggle example setting programmatically
        exampleToggle:SetValue(not exampleToggle.Value)
        print("Toggle is now", exampleToggle.Value)
        -- show a notification
        Fluent:Notify({
            Title = "Action",
            Content = "Test Button executed",
            Duration = 3,
        })
    end,
})

-- Display the window
Window:Display()

-- RESTORE ICON (when window is minimized)
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local localPlayer = Players.LocalPlayer
local playerGui = localPlayer:WaitForChild("PlayerGui")

local restoreIcon = Instance.new("ImageButton")
restoreIcon.Name = "RestoreIcon"
restoreIcon.Size = UDim2.new(0, 50, 0, 50)
restoreIcon.Position = UDim2.new(1, -60, 1, -60)
restoreIcon.Image = "rbxassetid://123456789" -- replace with your image asset ID
restoreIcon.BackgroundTransparency = 1
restoreIcon.Visible = false
restoreIcon.Parent = playerGui

-- Show/hide icon based on window visibility
RunService.RenderStepped:Connect(function()
    restoreIcon.Visible = not Window:IsVisible()
end)

-- Click restores window
restoreIcon.MouseButton1Click:Connect(function()
    Window:Display()
end)
