-- Brainrot Universal Script Enhanced for All Players
-- Multiple Rayfield loading methods
local Rayfield
pcall(function()
    Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()
end)
if not Rayfield then
    pcall(function()
        Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()
    end)
end
if not Rayfield then return end

-- Wait for game load
repeat wait(0.1) until game:IsLoaded()

-- Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local TeleportService = game:GetService("TeleportService")
local LocalPlayer = Players.LocalPlayer

-- Variables
local basePosition = Vector3.new(0, 10, 0)
local originalSpeed = 16
local killAuraActive = false
local killAuraConnection = nil

-- Grant admin commands to all players
Players.PlayerAdded:Connect(function(player)
    Rayfield:Notify({Title = "Admin Enabled", Content = player.Name .. " ora ha comandi admin!", Duration = 2})
end)

-- Anti-kick system
local function antiKick()
    local mt = getrawmetatable(game)
    local old = mt.__namecall
    setreadonly(mt, false)
    mt.__namecall = newcclosure(function(self, ...)
        if getnamecallmethod() == "Kick" then return end
        return old(self, ...)
    end)
    setreadonly(mt, true)
end
pcall(antiKick)

-- Natural walk teleport for bypass
local function naturalWalk(targetPosition)
    local char = LocalPlayer.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local hrp = char.HumanoidRootPart
    local dist = (hrp.Position - targetPosition).Magnitude
    local walkTime = dist / (originalSpeed * 1.15)
    TweenService:Create(hrp, TweenInfo.new(walkTime, Enum.EasingStyle.Linear), {CFrame = CFrame.new(targetPosition)}):Play()
end

-- Kill Aura 360°
local function startKillAura()
    if killAuraActive then return end; killAuraActive = true
    killAuraConnection = RunService.Heartbeat:Connect(function()
        pcall(function()
            local char = LocalPlayer.Character
            if not char or not char:FindFirstChild("HumanoidRootPart") then return end
            local tool = LocalPlayer.Backpack:FindFirstChildOfClass("Tool") or char:FindFirstChildOfClass("Tool")
            if not tool then return end
            local playersNearby = {}
            for _, p in pairs(Players:GetPlayers()) do
                if p ~= LocalPlayer and p.Character and p.Character:FindFirstChild("HumanoidRootPart") then
                    local d = (p.Character.HumanoidRootPart.Position - char.HumanoidRootPart.Position).Magnitude
                    if d < 20 then table.insert(playersNearby, {p,d}) end
                end
            end
            table.sort(playersNearby, function(a,b) return a[2] < b[2] end)
            for i=1, math.min(#playersNearby,3) do
                local pos = playersNearby[i][1].Character.HumanoidRootPart.Position
                char.HumanoidRootPart.CFrame = CFrame.lookAt(char.HumanoidRootPart.Position, pos)
                if tool.Parent == LocalPlayer.Backpack then char.Humanoid:EquipTool(tool) end
                tool:Activate(); wait(0.05)
            end
        end)
    end)
end
local function stopKillAura()
    if killAuraConnection then killAuraConnection:Disconnect() end; killAuraActive = false
end

-- GUI helper for minimizable frames
local function makeMinimizable(frame, header, content)
    local btn = Instance.new("TextButton")
    btn.Size = UDim2.new(0,25,0,25)
    btn.Position = UDim2.new(1,-30,0,5)
    btn.Text = "−"; btn.Font = Enum.Font.GothamBold; btn.TextSize = 16
    btn.BackgroundColor3 = Color3.fromRGB(50,50,60); btn.BackgroundTransparency = 0.5
    btn.Parent = header
    local mini = false
    btn.MouseButton1Click:Connect(function()
        mini = not mini
        content.Visible = not mini
        if mini then
            frame.Size = UDim2.new(frame.Size.X.Scale, frame.Size.X.Offset, 0, header.Size.Y.Offset)
            btn.Text = "+"
        else
            frame.Size = UDim2.new(frame.Size.X.Scale, frame.Size.X.Offset, frame.Size.Y.Scale, header.Size.Y.Offset + content.Size.Y.Offset)
            btn.Text = "−"
        end
    end)
end

-- Leave & Server Hop GUI
local function createLeaveGui()
    if LocalPlayer.PlayerGui:FindFirstChild("LeaveGui") then LocalPlayer.PlayerGui.LeaveGui:Destroy() end
    local gui = Instance.new("ScreenGui", LocalPlayer.PlayerGui); gui.Name = "LeaveGui"
    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,260,0,130); frame.Position = UDim2.new(0.5,-130,0.5,-65)
    frame.BackgroundColor3 = Color3.fromRGB(30,30,40); frame.Active = true; frame.Draggable = true
    local header = Instance.new("Frame", frame)
    header.Size = UDim2.new(1,0,0,30); header.BackgroundColor3 = Color3.fromRGB(40,40,60)
    local content = Instance.new("Frame", frame)
    content.Size = UDim2.new(1,0,1,-30); content.Position = UDim2.new(0,0,0,30)
    content.BackgroundTransparency = 1
    makeMinimizable(frame, header, content)
    local title = Instance.new("TextLabel", header)
    title.Text = "🚪 Leave & Hop"; title.Size = UDim2.new(1,-60,1,0); title.BackgroundTransparency = 1; title.Font = Enum.Font.GothamBold; title.TextSize = 18
    local btnLeave = Instance.new("TextButton", content)
    btnLeave.Size = UDim2.new(0,100,0,40); btnLeave.Position = UDim2.new(0.1,0,0.2,0)
    btnLeave.Text = "❌ LEAVE"; btnLeave.Font = Enum.Font.GothamBold; btnLeave.TextSize = 16; btnLeave.BackgroundColor3 = Color3.fromRGB(200,80,80)
    btnLeave.MouseButton1Click:Connect(function() TeleportService:TeleportToPlaceInstance(game.PlaceId, nil, LocalPlayer) end)
    local btnHop = Instance.new("TextButton", content)
    btnHop.Size = UDim2.new(0,120,0,40); btnHop.Position = UDim2.new(0.55,0,0.2,0)
    btnHop.Text = "🔄 SERVER HOP"; btnHop.Font = Enum.Font.GothamBold; btnHop.TextSize = 16; btnHop.BackgroundColor3 = Color3.fromRGB(100,150,255)
    btnHop.MouseButton1Click:Connect(function() TeleportService:Teleport(game.PlaceId, LocalPlayer) end)
end

-- Base Control GUI
local function createBaseGui()
    if LocalPlayer.PlayerGui:FindFirstChild("BaseGui") then LocalPlayer.PlayerGui.BaseGui:Destroy() end
    local gui = Instance.new("ScreenGui", LocalPlayer.PlayerGui); gui.Name = "BaseGui"
    local frame = Instance.new("Frame", gui)
    frame.Size = UDim2.new(0,320,0,170); frame.Position = UDim2.new(0.5,-160,0.5,-85)
    frame.BackgroundColor3 = Color3.fromRGB(25,25,35); frame.Active = true; frame.Draggable = true
    local header = Instance.new("Frame", frame)
    header.Size = UDim2.new(1,0,0,30); header.BackgroundColor3 = Color3.fromRGB(35,35,55)
    local content = Instance.new("Frame", frame)
    content.Size = UDim2.new(1,0,1,-30); content.Position = UDim2.new(0,0,0,30); content.BackgroundTransparency = 1
    makeMinimizable(frame, header, content)
    local title = Instance.new("TextLabel", header)
    title.Text = "📍 Base Control"; title.Size = UDim2.new(1,-60,1,0); title.BackgroundTransparency = 1; title.Font = Enum.Font.GothamBold; title.TextSize = 18
    local btnSet = Instance.new("TextButton", content)
    btnSet.Size = UDim2.new(0,140,0,35); btnSet.Position = UDim2.new(0.1,0,0.2,0)
    btnSet.Text = "📌 SET POSITION"; btnSet.Font = Enum.Font.GothamBold; btnSet.TextSize = 14; btnSet.BackgroundColor3 = Color3.fromRGB(100,200,120)
    btnSet.MouseButton1Click:Connect(function()
        local c = LocalPlayer.Character
        if c and c:FindFirstChild("HumanoidRootPart") then
            basePosition = c.HumanoidRootPart.Position
            Rayfield:Notify({Title="Base Set",Content="Posizione impostata: "..tostring(basePosition),Duration=2})
        end
    end)
    local btnGo = Instance.new("TextButton", content)
    btnGo.Size = UDim2.new(0,140,0,35); btnGo.Position = UDim2.new(0.6,0,0.2,0)
    btnGo.Text = "🚀 GO TO BASE"; btnGo.Font = Enum.Font.GothamBold; btnGo.TextSize = 14; btnGo.BackgroundColor3 = Color3.fromRGB(100,150,255)
    btnGo.MouseButton1Click:Connect(function() naturalWalk(basePosition) end)
end

-- Main Window & Tabs
local Window = Rayfield:CreateWindow({Name="Brainrot Hub Universal",LoadingTitle="Loading...",ConfigurationSaving={Enabled=false},Discord={Enabled=false},KeySystem=false})
local TabMain = Window:CreateTab("Main",4483362458)
TabMain:CreateButton({Name="Open Leave GUI",Callback=createLeaveGui})
TabMain:CreateButton({Name="Open Base GUI",Callback=createBaseGui})
local TabCombat = Window:CreateTab("Combat",4483362458)
TabCombat:CreateToggle({Name="Enhanced Kill Aura",Default=false,Callback=function(v) if v then startKillAura() else stopKillAura() end end})

Rayfield:Notify({Title="Universal Admin Hub",Content="Tutto pronto: GUI minimizzabili, server hop, base TP bypass e kill aura!",Duration=4})
