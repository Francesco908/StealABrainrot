-- Carichiamo Rayfield UI
local Rayfield = loadstring(game:HttpGet('https://raw.githubusercontent.com/shlexware/Rayfield/main/source'))()

local Window = Rayfield:CreateWindow({
    Name = "Script Base",
    LoadingTitle = "Caricamento...",
    LoadingSubtitle = "By SKIBIDI",
    ConfigurationSaving = {
        Enabled = true,
        FolderName = nil, -- Se vuoi un folder specifico
        FileName = "Config"
    },
    Discord = {
        Enabled = false,
        Invite = "",
        RememberJoins = true
    },
    KeySystem = false
})

-- TAB principale
local MainTab = Window:CreateTab("Main")

-- SEZIONE teleport e boost
local TPSection = MainTab:CreateSection("Teleport & Boost")

-- Teleport to player dropdown
local players = game:GetService("Players")

local playerDropdown = MainTab:CreateDropdown({
    Name = "Seleziona Player",
    Options = {},
    Flag = "PlayerDropdown",
    Callback = function(selected)
        print("Player scelto:", selected)
    end
})

-- Funzione per aggiornare la lista dei giocatori nel dropdown
local function updatePlayers()
    local plrs = {}
    for _,plr in pairs(players:GetPlayers()) do
        if plr ~= players.LocalPlayer then
            table.insert(plrs, plr.Name)
        end
    end
    playerDropdown:UpdateOptions(plrs)
end

updatePlayers()
players.PlayerAdded:Connect(updatePlayers)
players.PlayerRemoving:Connect(updatePlayers)

-- Bottone per teleport to player
MainTab:CreateButton({
    Name = "Teleport to Player",
    Callback = function()
        local selectedName = Rayfield.Flags["PlayerDropdown"].Value
        local targetPlayer = players:FindFirstChild(selectedName)
        if targetPlayer and targetPlayer.Character and targetPlayer.Character:FindFirstChild("HumanoidRootPart") then
            local hrp = players.LocalPlayer.Character and players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = targetPlayer.Character.HumanoidRootPart.CFrame
                Rayfield:Notify({
                    Title = "Teleport",
                    Content = "Teletrasportato a "..selectedName,
                    Duration = 3.5,
                    Image = 4483362458,
                    Actions = {Ignore = true}
                })
            end
        else
            Rayfield:Notify({
                Title = "Errore",
                Content = "Player non trovato o senza personaggio.",
                Duration = 3.5,
                Image = 4483362458,
                Actions = {Ignore = true}
            })
        end
    end
})

-- Slider per boost velocità
local speedSlider = MainTab:CreateSlider({
    Name = "Boost Velocità",
    Range = {16, 100}, -- velocità min e max
    Increment = 1,
    Suffix = "Speed",
    CurrentValue = 16,
    Flag = "SpeedSlider",
    Callback = function(value)
        local character = players.LocalPlayer.Character
        if character and character:FindFirstChild("Humanoid") then
            character.Humanoid.WalkSpeed = value
        end
    end
})

-- Textbox per Set TP
local tpPosTextbox = MainTab:CreateTextbox({
    Name = "Set Teleport (x,y,z)",
    PlaceholderText = "Esempio: 0,10,0",
    Flag = "SetTP",
    Callback = function(text)
        local x,y,z = text:match("([^,]+),([^,]+),([^,]+)")
        if x and y and z then
            x,y,z = tonumber(x), tonumber(y), tonumber(z)
            if x and y and z then
                Rayfield.Flags["SetTP"].Value = Vector3.new(x,y,z)
            else
                Rayfield:Notify({
                    Title = "Errore",
                    Content = "Coordinate non valide",
                    Duration = 3.5,
                    Image = 4483362458,
                    Actions = {Ignore = true}
                })
            end
        end
    end
})

-- Bottone per teleportare alla posizione impostata
MainTab:CreateButton({
    Name = "Teleport to Position",
    Callback = function()
        local pos = Rayfield.Flags["SetTP"].Value
        if typeof(pos) == "Vector3" then
            local hrp = players.LocalPlayer.Character and players.LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
            if hrp then
                hrp.CFrame = CFrame.new(pos)
                Rayfield:Notify({
                    Title = "Teleport",
                    Content = "Teletrasportato a posizione impostata.",
                    Duration = 3.5,
                    Image = 4483362458,
                    Actions = {Ignore = true}
                })
            end
        else
            Rayfield:Notify({
                Title = "Errore",
                Content = "Devi prima inserire una posizione valida",
                Duration = 3.5,
                Image = 4483362458,
                Actions = {Ignore = true}
            })
        end
    end
})
