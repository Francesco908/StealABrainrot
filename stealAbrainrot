local TweenService = game:GetService("TweenService")
local Players = game:GetService("Players")
local player = Players.LocalPlayer
local character = player.Character or player.CharacterAdded:Wait()
local humanoidRootPart = character:WaitForChild("HumanoidRootPart")
local humanoid = character:WaitForChild("Humanoid")

-- Funzione per trovare il PlotBlock
local function findPlotBlock()
    local workspace = game.Workspace
    for _, obj in pairs(workspace:GetDescendants()) do
        if obj.Name == "PlotBlock" then
            return obj
        end
    end
    return nil
end

-- Funzione Auto Lock
local function autoLock()
    local plotBlock = findPlotBlock()
    if plotBlock then
        local targetPosition = plotBlock.Position + Vector3.new(0, 165, 0)
        humanoid.PlatformStand = true -- Attiva PlatformStand per il movimento fluido
        local tweenInfo = TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local tween = TweenService:Create(humanoidRootPart, tweenInfo, {CFrame = CFrame.new(targetPosition)})
        tween:Play()
        tween.Completed:Wait()
        humanoid.PlatformStand = false -- Disabilita PlatformStand per lasciare il giocatore lì
    else
        warn("PlotBlock non trovato!")
    end
end

-- Funzione Go to Base (assumendo che la base sia a una posizione predefinita)
local basePosition = Vector3.new(100, 0, 100) -- Modifica con la posizione reale della base
local function goToBase()
    local targetPosition = Vector3.new(basePosition.X, 165, basePosition.Z)
    humanoid.PlatformStand = true -- Attiva PlatformStand per il movimento
    local tweenInfo = TweenInfo.new(1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
    local tween = TweenService:Create(humanoidRootPart, tweenInfo, {CFrame = CFrame.new(targetPosition)})
    tween:Play()
    tween.Completed:Wait()
    wait(2) -- Attende 2 secondi a 165 unità
    humanoid.PlatformStand = false -- Disabilita PlatformStand per far cadere il giocatore
end

-- Creazione del GUI migliorato
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Parent = player:WaitForChild("PlayerGui")
ScreenGui.Name = "StealHelperGUI"

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 300, 0, 400)
MainFrame.Position = UDim2.new(0.5, -150, 0.5, -200)
MainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 50)
MainFrame.BorderSizePixel = 0
MainFrame.Parent = ScreenGui

-- Aggiunta del gradiente
local Gradient = Instance.new("UIGradient")
Gradient.Color = ColorSequence.new{
    ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 30, 50)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(10, 10, 20))
}
Gradient.Parent = MainFrame

-- Pulsante Auto Lock
local AutoLockButton = Instance.new("TextButton")
AutoLockButton.Size = UDim2.new(0, 200, 0, 50)
AutoLockButton.Position = UDim2.new(0.5, -100, 0, 20)
AutoLockButton.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
AutoLockButton.TextColor3 = Color3.fromRGB(255, 255, 255)
AutoLockButton.Text = "Auto Lock"
AutoLockButton.Font = Enum.Font.Gotham
AutoLockButton.TextSize = 18
AutoLockButton.Parent = MainFrame

-- Pulsante Go to Base
local GoToBaseButton = Instance.new("TextButton")
GoToBaseButton.Size = UDim2.new(0, 200, 0, 50)
GoToBaseButton.Position = UDim2.new(0.5, -100, 0, 80)
GoToBaseButton.BackgroundColor3 = Color3.fromRGB(100, 200, 100)
GoToBaseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
GoToBaseButton.Text = "Go to Base"
GoToBaseButton.Font = Enum.Font.Gotham
GoToBaseButton.TextSize = 18
GoToBaseButton.Parent = MainFrame

-- Animazione per i pulsanti
local function animateButton(button)
    button.MouseButton1Click:Connect(function()
        local originalSize = button.Size
        local tweenInfo = TweenInfo.new(0.1, Enum.EasingStyle.Quad, Enum.EasingDirection.Out)
        local shrink = TweenService:Create(button, tweenInfo, {Size = UDim2.new(0, 190, 0, 45)})
        shrink:Play()
        shrink.Completed:Wait()
        local expand = TweenService:Create(button, tweenInfo, {Size = originalSize})
        expand:Play()
    end)
end

-- Connessione delle funzioni ai pulsanti
AutoLockButton.MouseButton1Click:Connect(autoLock)
GoToBaseButton.MouseButton1Click:Connect(goToBase)

-- Animazione per entrambi i pulsanti
animateButton(AutoLockButton)
animateButton(GoToBaseButton)
